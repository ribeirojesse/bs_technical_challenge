{% extends "base/base.html" %}

{% block page_title %}
    Review Cart
{% endblock %}

{% block content %}

<h2 class="text-2xl font-semibold mb-6 text-center">
    Cart Review
</h2>

{% if items %}

<div class="overflow-x-auto">
    <table class="table table-zebra w-full">
        <thead>
            <tr class="bg-gray-50">
                <th class="w-24">Image</th>
                <th>Product</th>
                <th class="text-center">Qty</th>
                <th class="text-right">Subtotal</th>
            </tr>
        </thead>

        <tbody>
        {% for item in items %}
            <tr>
                <td class="p-2">
                    {% if item.product.image %}
                        <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}"
                             class="h-12 w-12 object-contain mx-auto rounded">
                    {% else %}
                        <div class="h-12 w-12 bg-gray-100 flex items-center justify-center text-gray-400 text-xs rounded mx-auto">
                            No image
                        </div>
                    {% endif %}
                </td>

                <td class="font-medium text-gray-800">{{ item.product.name }}</td>
                <td class="text-center">{{ item.quantity }}</td>
                <td class="text-right font-semibold">${{ item.subtotal }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<div class="mt-4 flex flex-col md:flex-row justify-between items-center gap-4">

    <p class="text-lg font-semibold text-gray-800">
        Total: ${{ total }}
    </p>

    <form method="post" action="{% url 'sales:place_order' %}" class="w-full md:w-auto">
        {% csrf_token %}
        <button class="btn btn-success w-full md:w-auto px-4 py-2 text-base font-medium hover:scale-105 transition-transform">
            Place Order
        </button>
    </form>

</div>

{% else %}

<div class="flex flex-col items-center justify-center mt-12 text-center text-gray-400 gap-2">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.6 8h13.2L17 13M7 13H5.4M17 13l1.6 8M6 21h12" />
    </svg>
    <p class="text-base font-medium">Your cart is empty</p>
    <p class="text-gray-500 text-sm">Add some products to continue.</p>
</div>

{% endif %}

{% endblock %}
