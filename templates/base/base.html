{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}Sales App{% endblock %}</title>

    <link rel="stylesheet" href="{% static "dist/css/default.css" %}">

    <script src="https://unpkg.com/htmx.org@2.0.3"></script>

    <script src="https://unpkg.com/alpinejs@3.14.1" defer></script>

    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />

    {% block head %}{% endblock %}
</head>

<body class="bg-gray-100 text-gray-900 min-h-screen flex flex-col lg:flex-row">

<div class="drawer lg:drawer-open">
    <input id="my-drawer-2" type="checkbox" class="drawer-toggle" />

    <div class="drawer-content flex flex-col">

        <nav class="flex items-center p-4 w-full bg-white shadow justify-between">

            <div class="flex items-center gap-2">
                <label for="my-drawer-2" class="btn btn-sm btn-ghost lg:hidden">
                    <span class="material-symbols-outlined">menu</span>
                </label>

                <h1 class="text-lg font-semibold">
                    {% block page_title %}{% endblock %}
                </h1>
            </div>

            <a href="{% url 'sales:review' %}" class="btn btn-sm btn-ghost relative">
                <span class="material-symbols-outlined">
                    shopping_cart
                </span>

                <span
                    class="badge badge-sm badge-error text-white absolute -top-1 -right-1"
                    id="cart-badge-wrapper"
                    hx-get="{% url 'sales:cart_badge' %}"
                    hx-trigger="cartUpdated from:body"
                    hx-swap="innerHTML"
                >
                    {% include "sales/cart_badge.html" %}
                </span>
            </a>

        </nav>

        <main class="flex-1 p-4">
            {% block content %}{% endblock %}
        </main>

    </div>

    <aside class="drawer-side bg-white border-r">
        <label for="my-drawer-2" class="drawer-overlay"></label>

        <div class="flex gap-2 items-center px-6" style="height: 64px">
            <img src="{% static 'images/logo.png' %}" class="w-12 h-12" />
            <h1 class="font-bold text-lg">Sales App</h1>
        </div>

        <ul class="menu w-80 p-4">
            <li>
                <a href="{% url 'sales:home' %}">
                    <span class="material-symbols-outlined">home</span>
                    Home
                </a>
            </li>

            <li>
                <a href="{% url 'sales:products' %}">
                    <span class="material-symbols-outlined">package</span>
                    Products
                </a>
            </li>

            <li>
                <a href="{% url 'sales:order_history' %}">
                    <span class="material-symbols-outlined">history</span>
                    Order History
                </a>
            </li>

            <li>
                <a href="{% url 'sales:review' %}">
                    <span class="material-symbols-outlined">shopping_cart</span>
                    Review Cart
                </a>
            </li>
        </ul>
    </aside>

</div>

<div id="modal-container" class="fixed inset-0 z-[99999]"></div>

<div
    id="toast-container"
    style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 99999;
        display: flex;
        flex-direction: column;
        gap: 12px;
        pointer-events: none;
    "
></div>

<script>
    document.body.addEventListener("htmx:configRequest", (event) => {
        event.detail.headers["X-CSRFToken"] = "{{ csrf_token }}";
    });
</script>

<script>
    document.body.addEventListener("htmx:afterSwap", (event) => {
        Alpine.initTree(event.target);
    });
</script>

</body>
</html>
